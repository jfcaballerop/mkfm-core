<!DOCTYPE html>
<html lang="es">

<head>
    <% include partials/head %>
        <style>
            th,
            td {
                /*use this property to disbale soft wrap*/
                white-space: nowrap;
                /*To make extra certain,add this css property*/
                word-break: keep-all;
                background-color: white;
            }
        </style>
</head>

<body>

    <section id="container">
        <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
        <!--header start-->
        <header class="header black-bg">
            <% include partials/header %>
        </header>
        <!--header end-->

        <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
        <!--sidebar start-->
        <aside>
            <% include partials/left_menu %>

        </aside>
        <!--sidebar end-->

        <!-- **********************************************************************************************************************************************************
        ***** Google Maps      
        *********************************************************************************************************************************************************** -->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper site-min-height">
                <h3><i class="fa fa-angle-right"></i> Edit Road</h3>
                <!-- page start-->
                <div class="row mt">
                    <div class="col-md-12" style="height:80vh;">
                        <div class="content-panel">
                            <div class="form-panel">
                                <form id="form" class="form-horizontal style-form" method="post" action="/auth/WEB/infodatatrack/update_infodatatrack">

                                    <div class="form-group">
                                        <input type="hidden" name="infodatatrack[_id]" value="<%- infodatatrack._id %>">
                                        <label class="col-xs-2 control-label">ROAD:</label>
                                        <div class="col-xs-6">
                                            <input name="infodatatrack[properties][name]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.name %>" required>
                                            <input name="infodatatrack[properties][video_roads]" type="hidden" class="form-control round-form input-sm" value="<%- infodatatrack.properties.video_roads %>" required>
                                        </div>
                                        <div class="col-xs-4">
                                            <button type="submit" class="btn btn-success btn-lg"><i class="fa fa-check"></i> Modificar</button>
                                            <button onclick="window.location='/auth/WEB/maps/view_data';" type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                                        </div>
                                        <br>
                                        <div class="col-xs-4">
                                            <b>Actualizado:</b>
                                            <%- moment(infodatatrack.updated_at).format('DD/MM/YYYY HH:mm:ss') %>
                                        </div>
                                        <div class="col-xs-4">
                                            <button id="showall" type="button" class="btn btn-round btn-success"><i class="fa fa-eye"></i> SHOW ALL COLUMNS</button>

                                        </div>
                                    </div>

                                    <div id="accordion">
                                        <div class="table-responsive">


                                            <table id="dataTable" class="table table-bordered table-xs">
                                                <thead>
                                                    <tr>
                                                        <th title="ID">#</th>
                                                        <th title="Selection"> Sel </th>
                                                        <th title="Inventary">INV</th>
                                                        <th id="infodatatrack[properties][coordTimes]" title="Date Time"> TIME </th>
                                                        <th id="infodatatrack[geometry][coordinates]" title="GPS - POS: Long - Lat - Cota">GPS </th>
                                                        <th id="infodatatrack[properties][pk]" title="PK"> PK </th>
                                                        <th id="infodatatrack[properties][road_category]" title="Road Category"> RC</th>
                                                        <th id="infodatatrack[properties][Roadlab]" title="IRI"> IRI </th>
                                                        <th id="infodatatrack[properties][date_construction]" title="Date of construction">DC</th>
                                                        <th id="infodatatrack[properties][alternative_itinerary]" title="Existence of Alternative Itinerary">EAI</th>
                                                        <th id="infodatatrack[properties][open_traffic]" title="Open to traffic?">OPEN</th>
                                                        <th id="infodatatrack[properties][existence_gauging_stations]" title="Existence of Gauging Stations">GS</th>
                                                        <th id="infodatatrack[properties][adt]" title="ADT">ADT</th>
                                                        <th id="infodatatrack[properties][traffic_high_peak]" title="Traffic high peak"> THP</th>
                                                        <th id="infodatatrack[properties][pavement_material]" title="pavement material"> PM</th>
                                                        <th id="infodatatrack[properties][base_material]" title="base material"> BM</th>
                                                        <th id="infodatatrack[properties][subbase_material]" title="subbase material"> SM</th>
                                                        <th id="infodatatrack[properties][number_lanes_inc]" title="Number of lanes (increasing KP)"> NOL INC</th>
                                                        <th id="infodatatrack[properties][number_lanes_dec]" title="Number of lanes (decreasing KP)"> NOL DEC</th>
                                                        <th id="infodatatrack[properties][total_number_lanes]" title="Total number of lanes"> TOT NOL</th>
                                                        <th id="infodatatrack[properties][total_width]" title="Total width (m)"> TOT WIDTH</th>
                                                        <th id="infodatatrack[properties][location_doc_road_projects]" title="Location of the documentation of road projects"> LOC DOC RP</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% 
                                                    var pk = 0;
                                                infodatatrack.properties.coordTimes.forEach(function(val, index){ 
                                                   %>

                                                        <tr>
                                                            <td>
                                                                <%= index%>
                                                            </td>
                                                            <td>
                                                                <input id="check<%- index %>" name="check[_id]" type="checkbox" class="input-xs" value="<%- infodatatrack._id %>">
                                                            </td>
                                                            <td>
                                                                <input id="<%- index %>" name="infodatatrack[properties][inventario]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.inventario[index] %>">
                                                            </td>
                                                            <td id="infodatatrack[properties][coordTimes]">
                                                                <%- moment(infodatatrack.properties.coordTimes[index]).format('DD-MM-YYYY HH:mm:ss') %>
                                                            </td>
                                                            <td id="infodatatrack[geometry][coordinates]">
                                                                <%- '[' + infodatatrack.geometry.coordinates[index] +']' %>
                                                            </td>
                                                            <td id="infodatatrack[properties][pk]">
                                                                <%- infodatatrack.properties.pk[index] %>
                                                            </td>
                                                            <td id="infodatatrack[properties][road_category]">
                                                                <select name="infodatatrack[properties][road_category]" class="form-control">
                                                                        <option>Main Road</option>
                                                                        <option>Secondary</option>
                                                                        <option>Feeder</option>
                                                                        <option>Urban</option>
                                                                        <option>1</option>
                                                                      </select>

                                                            </td>
                                                            <td id="infodatatrack[properties][Roadlab]">
                                                                <% if(infodatatrack.properties.Roadlab){ %>
                                                                    <input name="infodatatrack[properties][Roadlab]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.Roadlab[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][Roadlab]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][date_construction]">
                                                                <% 
                                                                if(typeof(infodatatrack.properties.date_construction[index]) !== "undefined" && infodatatrack.properties.date_construction[index] !== ""){ %>
                                                                    <input name="infodatatrack[properties][date_construction]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.date_construction[index] %>">
                                                                    <% } else {%>
                                                                        <input name="infodatatrack[properties][date_construction]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][alternative_itinerary]">
                                                                <select name="infodatatrack[properties][alternative_itinerary]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                            </td>
                                                            <td id="infodatatrack[properties][open_traffic]">
                                                                <select name="infodatatrack[properties][open_traffic]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                            </td>
                                                            <td id="infodatatrack[properties][existence_gauging_stations]">
                                                                <select name="infodatatrack[properties][existence_gauging_stations]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                            </td>
                                                            <td id="infodatatrack[properties][adt]">
                                                                <% if(infodatatrack.properties.adt){ %>
                                                                    <input name="infodatatrack[properties][adt]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.adt[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][adt]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][traffic_high_peak]">
                                                                <% if(infodatatrack.properties.traffic_high_peak){ %>
                                                                    <input name="infodatatrack[properties][traffic_high_peak]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.traffic_high_peak[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][traffic_high_peak]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][pavement_material]">
                                                                <select name="infodatatrack[properties][pavement_material]" class="form-control">
                                                                    <option>Asphalt
                                                                    </option>
                                                                    <option>Bituminous pavement
                                                                    </option>
                                                                    <option>Macadam
                                                                    </option>
                                                                    <option>Cement Stabilized
                                                                    </option>
                                                                            <option>Gravel surface
                                                                            </option>
                                                                            <option>Earth
                                                                                </option>
                                                                                <option>Other
                                                                                </option>
                                                                            <option>Unknown
                                                                            </option>
                                                                            <option>1</option>
                                                                        </select>
                                                            </td>
                                                            <td id="infodatatrack[properties][base_material]">
                                                                <% if(infodatatrack.properties.base_material){ %>
                                                                    <input name="infodatatrack[properties][base_material]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.base_material[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][base_material]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][subbase_material]">
                                                                <% if(infodatatrack.properties.subbase_material){ %>
                                                                    <input name="infodatatrack[properties][subbase_material]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.subbase_material[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][subbase_material]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][number_lanes_inc]">
                                                                <% if(infodatatrack.properties.number_lanes_inc){ %>
                                                                    <input name="infodatatrack[properties][number_lanes_inc]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.number_lanes_inc[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][number_lanes_inc]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][number_lanes_dec]">
                                                                <% if(infodatatrack.properties.number_lanes_dec){ %>
                                                                    <input name="infodatatrack[properties][number_lanes_dec]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.number_lanes_dec[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][number_lanes_dec]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][total_number_lanes]">
                                                                <% if(infodatatrack.properties.total_number_lanes){ %>
                                                                    <input name="infodatatrack[properties][total_number_lanes]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.total_number_lanes[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][total_number_lanes]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][total_width]">
                                                                <% if(infodatatrack.properties.total_width){ %>
                                                                    <input name="infodatatrack[properties][total_width]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.total_width[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][total_width]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                            <td id="infodatatrack[properties][location_doc_road_projects]">
                                                                <% if(infodatatrack.properties.location_doc_road_projects){ %>
                                                                    <input name="infodatatrack[properties][location_doc_road_projects]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.location_doc_road_projects[index] %>">
                                                                    <%} else {%>
                                                                        <input name="infodatatrack[properties][location_doc_road_projects]" type="text" class="form-control round-form input-sm" value="">
                                                                        <% } %>
                                                            </td>
                                                        </tr>
                                                        <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- form panel-->

                        </div>
                        <!--/content-panel -->
                    </div>
                </div>
                <!-- page end-->
            </section>
        </section>
        <!-- /MAIN CONTENT -->

        <!--main content end-->
        <!--footer start-->
        <footer class="site-footer">
            <% include partials/footer %>
        </footer>
        <!--footer end-->
    </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <% include partials/footer_scripts %>

        <!-- <script src="/assets/js/jquery.js"></script> -->
        <script src="/assets/js/bootstrap.min.js"></script>
        <script class="include" type="text/javascript" src="/assets/js/jquery.dcjqaccordion.2.7.js"></script>
        <script src="/assets/js/jquery.scrollTo.min.js"></script>
        <script src="/assets/js/jquery.nicescroll.js" type="text/javascript"></script>


        <!--common script for all pages-->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
        <script src="/assets/js/common-scripts.js"></script>
        <script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>

        <!--script for this page-->
        <% include ./partials/data_infodatatrack_scripts %>

</body>

</html>