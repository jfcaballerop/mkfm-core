<!DOCTYPE html>
<html lang="es">

<head>
    <% include partials/head %>


</head>

<body>

    <section id="container">
        <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
        <!--header start-->
        <header class="header black-bg">
            <% include partials/header %>
        </header>
        <!--header end-->

        <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
        <!--sidebar start-->
        <aside>
            <% include partials/left_menu %>

        </aside>
        <!--sidebar end-->

        <!-- **********************************************************************************************************************************************************
        ***** Google Maps      
        *********************************************************************************************************************************************************** -->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper site-min-height">
                <h3><i class="fa fa-angle-right"></i> Edit Road</h3>
                <!-- page start-->
                <div class="row mt">
                    <div class="col-md-12" style="height:80vh;">
                        <div class="content-panel">
                            <div class="form-panel">
                                <form class="form-horizontal style-form" method="post" action="/auth/WEB/infodatatrack/update_infodatatrack">

                                    <div class="form-group">
                                        <input type="hidden" name="infodatatrack[_id]" value="<%- infodatatrack._id %>">
                                        <label class="col-xs-2 control-label">ROAD:</label>
                                        <div class="col-xs-6">
                                            <input name="infodatatrack[properties][name]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.name %>" required>
                                            <input name="infodatatrack[properties][video_roads]" type="hidden" class="form-control round-form input-sm" value="<%- infodatatrack.properties.video_roads %>" required>
                                        </div>
                                        <div class="col-xs-4">
                                            <button type="submit" class="btn btn-success btn-lg"><i class="fa fa-check"></i> Modificar</button>
                                            <button onclick="window.location='/auth/WEB/maps/view_data';" type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button> </div>
                                    </div>

                                    <div id="accordion">
                                        <table id="dataTable" class="table table-striped table-xs">
                                            <thead>
                                                <tr>
                                                    <th title="ID">#</th>
                                                    <th title="Selection"> Sel </th>
                                                    <th title="Inventary">INV</th>
                                                    <th title="Date Time"> TIME </th>
                                                    <th title="GPS - POS: Long - Lat - Cota">GPS </th>
                                                    <th title="PK"> PK </th>
                                                    <th title="Road Category"> RC</th>
                                                    <th title="IRI"> IRI </th>
                                                    <th title="Date of construction">DC</th>
                                                    <th title="Existence of Alternative Itinerary">EAI</th>
                                                    <th title="Open to traffic?">OPEN</th>
                                                    <th title="Existence of Gauging Stations">GS</th>
                                                    <th title="ADT">ADT</th>
                                                    <th title="Traffic high peak"> THP</th>
                                                    <!-- <td>UTM</td> -->
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% 
                                                    var pk = 0;
                                                infodatatrack.properties.coordTimes.forEach(function(val, index){ 
                                                   %>

                                                    <tr>
                                                        <td>
                                                            <%= index%>
                                                        </td>
                                                        <td>
                                                            <input name="infodatatrack[_id]" type="checkbox" class="input-xs" id="<%- infodatatrack._id%>" value="<%- infodatatrack._id %>">
                                                        </td>
                                                        <td>
                                                            <input name="infodatatrack[properties][inventario]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.inventario %>">
                                                        </td>
                                                        <td>
                                                            <%- moment(infodatatrack.properties.coordTimes[index]).format('DD-MM-YYYY HH:mm:ss') %>
                                                        </td>
                                                        <td>
                                                            <%- '[' + infodatatrack.geometry.coordinates[index] +']' %>
                                                        </td>
                                                        <td>
                                                            <%- infodatatrack.properties.pk[index] %>
                                                        </td>
                                                        <td>
                                                            <select name="infodatatrack[properties][road_category]" class="form-control">
                                                                        <option>Main Road</option>
                                                                        <option>Secondary</option>
                                                                        <option>Feeder</option>
                                                                        <option>Urban</option>
                                                                        <option>1</option>
                                                                      </select>

                                                        </td>
                                                        <td>
                                                            <% if(infodatatrack.properties.Roadlab){ %>
                                                                <input name="infodatatrack[properties][Roadlab]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.Roadlab[index] %>">
                                                                <%} else {%>
                                                                    <input name="infodatatrack[properties][Roadlab]" type="text" class="form-control round-form input-sm" value="">
                                                                    <% } %>
                                                        </td>
                                                        <td>
                                                            <% 
                                                                if(typeof(infodatatrack.properties.date_construction[index]) !== "undefined"){ %>
                                                                <input name="infodatatrack[properties][date_construction]" type="text" class="form-control round-form input-sm" value="<%- moment(infodatatrack.properties.date_construction[index]).format('DD-MM-YYYY') %>">
                                                                <% } else {%>
                                                                    <input name="infodatatrack[properties][date_construction]" type="text" class="form-control round-form input-sm" value="">
                                                                    <% } %>
                                                        </td>
                                                        <td>
                                                            <select name="infodatatrack[properties][alternative_itinerary]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                        </td>
                                                        <td>
                                                            <select name="infodatatrack[properties][open_traffic]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                        </td>
                                                        <td>
                                                            <select name="infodatatrack[properties][existence_gauging_stations]" class="form-control">
                                                                            <option>Y</option>
                                                                            <option>N</option>
                                                                            <option>NA</option>
                                                                            <option>Unknown</option>
                                                                            <option>1</option>
                                                                          </select>

                                                        </td>
                                                        <td>
                                                            <% if(infodatatrack.properties.adt){ %>
                                                                <input name="infodatatrack[properties][adt]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.adt[index] %>">
                                                                <%} else {%>
                                                                    <input name="infodatatrack[properties][adt]" type="text" class="form-control round-form input-sm" value="">
                                                                    <% } %>
                                                        </td>
                                                        <td>
                                                            <% if(infodatatrack.properties.traffic_high_peak){ %>
                                                                <input name="infodatatrack[properties][traffic_high_peak]" type="text" class="form-control round-form input-sm" value="<%- infodatatrack.properties.traffic_high_peak[index] %>">
                                                                <%} else {%>
                                                                    <input name="infodatatrack[properties][traffic_high_peak]" type="text" class="form-control round-form input-sm" value="">
                                                                    <% } %>
                                                        </td>
                                                    </tr>
                                                    <% }); %>
                                            </tbody>
                                        </table>
                                    </div>
                                </form>
                            </div>
                            <!-- form panel-->

                        </div>
                        <!--/content-panel -->
                    </div>
                </div>
                <!-- page end-->
            </section>
        </section>
        <!-- /MAIN CONTENT -->

        <!--main content end-->
        <!--footer start-->
        <footer class="site-footer">
            <% include partials/footer %>
        </footer>
        <!--footer end-->
    </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="/assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="/assets/js/jquery.scrollTo.min.js"></script>
    <script src="/assets/js/jquery.nicescroll.js" type="text/javascript"></script>


    <!--common script for all pages-->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="/assets/js/common-scripts.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>

    <!--script for this page-->

    <script>
        function saveRoad() {
            alert('Save ROAD');
        }
    </script>

</body>

</html>