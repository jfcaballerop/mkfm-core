<script>
    var $checks;

    $(document).ready(function() {
        var rObject;

        function fillTable(data) {
            //var e = esc;
            var html = [];
            var h = -1;

            data.geometry.coordinates.forEach(function(element, index) {
                html[++h] = '<tr id="row' + index + '" style="display: none;"><td>' + index + '</td>';
                html[++h] = '<td><input id="check' + index + '" name="check[_id]" type="checkbox" class="input-xs" value="' + data._id + '"></td>'
                    // html[++h] = '<td><input id="' + index + '" name="infodatatrack[properties][inventario]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    //     (typeof data.properties.inventario[index] !== "undefined" ? data.properties.inventario[index] : '') + '"></td>';
                html[++h] = '<td id="infodatatrack[properties][coordTimes]">' + $.format.date(data.properties.coordTimes[index], "dd-MM-yyyy HH:mm:ss") + '</td>';


                if (index == 0) {
                    html[++h] = '<td id="infodatatrack[properties][videoTime]">' + index + '</td>';
                } else {
                    var d2 = new Date($.format.date(data.properties.coordTimes[0], "yyyy-MM-dd HH:mm:ss"))
                    var d1 = new Date($.format.date(data.properties.coordTimes[index], "yyyy-MM-dd HH:mm:ss"))
                    var sec = (d1 - d2) / 1000;
                    var min = 0;
                    if (sec >= 60) {
                        var minutes = Math.floor(sec / 60);
                        var formattedSec = ("0" + (sec - minutes * 60)).slice(-2);
                        var seconds = formattedSec;
                    } else {
                        var minutes = 0;
                        var formattedSec = ("0" + sec).slice(-2);
                        var seconds = formattedSec;
                    }
                    html[++h] = '<td id="infodatatrack[properties][videoTime]">' + minutes + ':' + seconds + '</td>';
                }
                html[++h] = '<td id="infodatatrack[geometry][coordinates]">[ ' + data.geometry.coordinates[index] + ' ]</td>';
                html[++h] = '<td id="infodatatrack[properties][kobo]">';
                if (data.properties.kobo !== undefined && data.properties.kobo[index] !== null && typeof data.properties.kobo[index] !== "undefined" &&
                    data.properties.kobo[index].kobo_type !== undefined && data.properties.kobo[index].kobo_type !== '') {
                    if (data.properties.kobo[index].kobo_type.toUpperCase() === "BRIDGE") {
                        html[++h] = '<i class="fa fa-circle" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.kobo[index].kobo_id + '\",' +
                            ' \"kobo_type\":\"' + data.properties.kobo[index].kobo_type + '\"}\' aria-hidden="true" style="color: #F47983;" title="BRIDGE"> </i>';
                    } else if (data.properties.kobo[index].kobo_type.toUpperCase() === "ODT") {
                        html[++h] = '<i class="fa fa-circle" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.kobo[index].kobo_id + '\",' +
                            ' \"kobo_type\":\"' + data.properties.kobo[index].kobo_type + '\"}\' aria-hidden="true" style="color: blue;" title="ODT"> </i>';
                    } else {
                        html[++h] = '<i class="fa fa-circle" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.kobo[index].kobo_id + '\",' +
                            ' \"kobo_type\":\"' + data.properties.kobo[index].kobo_type + '\"}\' aria-hidden="true" style="color: green;" title="GEOTECHNICAL"> </i>';

                    }
                }
                if (data.properties.koboedit !== undefined && data.properties.koboedit !== null &&
                    typeof data.properties.koboedit !== "undefined" && data.properties.koboedit !== '' && data.properties.koboedit.length > 0 &&
                    data.properties.koboedit[0].kobo_type[index] !== undefined && data.properties.koboedit[0].kobo_type[index] !== '') {
                    if (data.properties.koboedit[0].kobo_type[index].toUpperCase() === "BRIDGE") {
                        html[++h] = ' <i class="fa fa-pencil-square-o" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.koboedit[0].kobo_id[index] + '\",' +
                            ' \"kobo_type\":\"' + data.properties.koboedit[0].kobo_type[index] + '\"}\' aria-hidden="true" style="color: #F47983;" title="BRIDGE"> </i>';
                        html[++h] = ' <i class="fa fa-trash" name="deleteKoboElem" data-params=\'{\"index\":\"' + index + '\"}\' aria-hidden="true" style="color: #F47983;" title="DELETE BRIDGE"> </i>';
                    } else if (data.properties.koboedit[0].kobo_type[index].toUpperCase() === "ODT") {
                        html[++h] = ' <i class="fa fa-pencil-square-o" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.koboedit[0].kobo_id[index] + '\",' +
                            ' \"kobo_type\":\"' + data.properties.koboedit[0].kobo_type[index] + '\"}\' aria-hidden="true" style="color: blue;" title="ODT"> </i>';
                        html[++h] = ' <i class="fa fa-trash" name="deleteKoboElem" data-params=\'{\"index\":\"' + index + '\"}\' aria-hidden="true" style="color: blue;" title="DELETE ODT"> </i>';
                    } else {
                        html[++h] = ' <i class="fa fa-pencil-square-o" name="modalKoboElem" data-params=\'{\"_id\":\"' + data.properties.koboedit[0].kobo_id[index] + '\",' +
                            ' \"kobo_type\":\"' + data.properties.koboedit[0].kobo_type[index] + '\"}\' aria-hidden="true" style="color: green;" title="GEOTECHNICAL"> </i>';
                        html[++h] = ' <i class="fa fa-trash" name="deleteKoboElem" data-params=\'{\"index\":\"' + index + '\"}\' aria-hidden="true" style="color: green;" title="DELETE GEOTECHNICAL"> </i>';

                    }

                    html[++h] = '<input name="infodatatrack[properties][koboedit][kobo_id]" type="hidden" style="min-width: 100px;" class="form-control round-form input-sm" value="' + data.properties.koboedit[0].kobo_id[index] + '">';
                    html[++h] = '<input name="infodatatrack[properties][koboedit][kobo_type]" type="hidden" style="min-width: 100px;" class="form-control round-form input-sm" value="' + data.properties.koboedit[0].kobo_type[index] + '">';
                } else {
                    html[++h] = '<input name="infodatatrack[properties][koboedit][kobo_id]" type="hidden" style="min-width: 100px;" class="form-control round-form input-sm" value="">';
                    html[++h] = '<input name="infodatatrack[properties][koboedit][kobo_type]" type="hidden" style="min-width: 100px;" class="form-control round-form input-sm" value="">';

                }
                html[++h] = '</td>';
                html[++h] = '<td id="infodatatrack[properties][pk]">' + data.properties.pk[index] + '</td>';
                html[++h] = '<td id="infodatatrack[properties][rcode]"><input name="infodatatrack[properties][rcode]" type="text" style="min-width: 100px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.rcode[index] !== "undefined" ? data.properties.rcode[index] : '') + '">';
                html[++h] = '<td id="infodatatrack[properties][road_category]">' +
                    '<select name="infodatatrack[properties][road_category]" class="form-control">' +
                    '<option ></option>' +
                    '<option >Main Road</option>' +
                    '<option >Secondary</option>' +
                    '<option >Feeder</option>' +
                    '<option >Urban</option>' +
                    '<option >1</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][open_traffic]"><input name="infodatatrack[properties][open_traffic]" type="text" style="min-width: 50;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.open_traffic[index] !== "undefined" ? data.properties.open_traffic[index] : '') + '">' +
                    '</td>';

                html[++h] = '<td id="infodatatrack[properties][pavement_material]">' +
                    '<select name="infodatatrack[properties][pavement_material]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Asphalt</option>' +
                    '<option>Concrete</option>' +
                    '<option>Concrete Wheel Track</option>' +
                    '<option>Gravel / Tarrish</option>' +
                    '<option>Stone paving</option>' +
                    '<option>Earth / Grass</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';

                html[++h] = '<td id="infodatatrack[properties][number_lanes_inc]"><input name="infodatatrack[properties][number_lanes_inc]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.number_lanes_inc[index] !== "undefined" ? data.properties.number_lanes_inc[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][number_lanes_dec]"><input name="infodatatrack[properties][number_lanes_dec]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.number_lanes_dec[index] !== "undefined" ? data.properties.number_lanes_dec[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][total_number_lanes]"><input name="infodatatrack[properties][total_number_lanes]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.total_number_lanes[index] !== "undefined" ? data.properties.total_number_lanes[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][total_width]"><input name="infodatatrack[properties][total_width]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.total_width[index] !== "undefined" ? data.properties.total_width[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][current_visual_condition]">' +
                    '<select name="infodatatrack[properties][current_visual_condition]" class="form-control">' +
                    '<option ></option>' +
                    '<option>A</option>' +
                    '<option>B</option>' +
                    '<option>C</option>' +
                    '<option>D</option>' +
                    '<option>E</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                //ROAD Furniture
                html[++h] = '<td id="infodatatrack[properties][RBarriersExist]"><input name="infodatatrack[properties][RBarriersExist]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.RBarriersExist[index] !== "undefined" ? data.properties.RBarriersExist[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RBarriersType]">' +
                    '<select name="infodatatrack[properties][RBarriersType]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Safety Fences</option>' +
                    '<option>Pedestrian guardrail</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RSafetyFence]">' +
                    '<select name="infodatatrack[properties][RSafetyFence]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Bollard</option>' +
                    '<option>Concrete / Masonry</option>' +
                    '<option>Metal</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RBarrierFunct]">' +
                    '<select name="infodatatrack[properties][RBarrierFunct]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RSignalsExist]"><input name="infodatatrack[properties][RSignalsExist]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.RSignalsExist[index] !== "undefined" ? data.properties.RSignalsExist[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RSignalsType]">' +
                    '<select name="infodatatrack[properties][RSignalsType]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Vertical sign</option>' +
                    '<option>Horizontal sign</option>' +
                    '<option>Lit sign</option>' +
                    '<option>Gantry</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RVSignalsType]">' +
                    '<select name="infodatatrack[properties][RVSignalsType]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Directional / Information</option>' +
                    '<option>Regulatory</option>' +
                    '<option>Warning</option>' +
                    '<option>Other</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RSignalsFunct]">' +
                    '<select name="infodatatrack[properties][RSignalsFunct]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RLightExist]"><input name="infodatatrack[properties][RLightExist]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.RLightExist[index] !== "undefined" ? data.properties.RLightExist[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RLightType]">' +
                    '<select name="infodatatrack[properties][RLightType]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Lighting point</option>' +
                    '<option>Switch room</option>' +
                    '<option>Distribution point</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][RLightFunct]">' +
                    '<select name="infodatatrack[properties][RLightFunct]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>'; // html[++h] = '<td id="infodatatrack[properties][RFPastInterv]"><input name="infodatatrack[properties][RFPastInterv]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.RFPastInterv[index] !== "undefined" ? data.properties.RFPastInterv[index] : '') + '">'+
                '</td>';
                // html[++h] = '<td id="infodatatrack[properties][RFYearInterv]"><input name="infodatatrack[properties][RFYearInterv]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.RFYearInterv[index] !== "undefined" ? data.properties.RFYearInterv[index] : '') + '">'+
                '</td>';
                // html[++h] = '<td id="infodatatrack[properties][RFComments]"><input name="infodatatrack[properties][RFComments]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.RFComments[index] !== "undefined" ? data.properties.RFComments[index] : '') + '">'+
                '</td>';
                // html[++h] = '<td id="infodatatrack[properties][bcode]"><input name="infodatatrack[properties][bcode]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.bcode[index] !== "undefined" ? data.properties.bcode[index] : '') + '">'+
                '</td>';
                html[++h] = '<td id="infodatatrack[properties][bexists]">' +
                    '<select name="infodatatrack[properties][bexists]" class="form-control">' +
                    '<option ></option>' +
                    '<option>YES</option>' +
                    '<option>NO</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][blenght]"><input name="infodatatrack[properties][blenght]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.blenght[index] !== "undefined" ? data.properties.blenght[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][bwidth]"><input name="infodatatrack[properties][bwidth]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.bwidth[index] !== "undefined" ? data.properties.bwidth[index] : '') + '">' +
                    '</td>';
                // html[++h] = '<td id="infodatatrack[properties][gcode]"><input name="infodatatrack[properties][gcode]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.gcode[index] !== "undefined" ? data.properties.gcode[index] : '') + '">'+
                '</td>';
                html[++h] = '<td id="infodatatrack[properties][gtype]">' +
                    '<select name="infodatatrack[properties][gtype]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Embankment</option>' +
                    '<option>Cutting</option>' +
                    '<option>Retaining wall</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                html[++h] = '<td id="infodatatrack[properties][gposition]">' +
                    '<select name="infodatatrack[properties][gposition]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                html[++h] = '<td id="infodatatrack[properties][gmaterial]">' +
                    '<select name="infodatatrack[properties][gmaterial]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete</option>' +
                    '<option>Masonry</option>' +
                    '<option>Gabion/Teramesh</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gnature]">' +
                    '<select name="infodatatrack[properties][gnature]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Homogeneous - massive rock</option>' +
                    '<option>Homogeneous - cracked rock</option>' +
                    '<option>Homogeneous - soil</option>' +
                    '<option>Heterogeneous – interstratified rock/soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in hard soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in soft soil</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gheight]"><input name="infodatatrack[properties][gheight]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.gheight[index] !== "undefined" ? data.properties.gheight[index] : '') + '">' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gh_h]">' +
                    '<select name="infodatatrack[properties][gh_h]" class="form-control">' +
                    '<option ></option>' +
                    '<option>0 - 10%</option>' +
                    '<option>10 - 25%</option>' +
                    '<option>25 - 50%</option>' +
                    '<option>50 - 75%</option>' +
                    '<option>>75%</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gslope]">' +
                    '<select name="infodatatrack[properties][gslope]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Vertical (90º)</option>' +
                    '<option>Steep (75-90º)</option>' +
                    '<option>Low (45-75º)</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gdistance]"><input name="infodatatrack[properties][gdistance]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                    (typeof data.properties.gdistance[index] !== "undefined" ? data.properties.gdistance[index] : '') + '">' +
                    '</td>';

                html[++h] = '<td id="infodatatrack[properties][gtreatments]">' +
                    '<select name="infodatatrack[properties][gtreatments]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gvegetation]">' +
                    '<select name="infodatatrack[properties][gvegetation]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gtypevegetation]">' +
                    '<select name="infodatatrack[properties][gtypevegetation]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Arboreal</option>' +
                    '<option>Bush / Shrub</option>' +
                    '<option>Herbaceus</option>' +
                    '<option>No vegetation</option>' +
                    '<option>Other</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gvisualcondition]">' +
                    '<select name="infodatatrack[properties][gvisualcondition]" class="form-control">' +
                    '<option ></option>' +
                    '<option>A</option>' +
                    '<option>B</option>' +
                    '<option>C</option>' +
                    '<option>D</option>' +
                    '<option>E</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][gtype2]">' +
                    '<select name="infodatatrack[properties][gtype2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Embankment</option>' +
                    '<option>Cutting</option>' +
                    '<option>Retaining wall</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                html[++h] += '<td id="infodatatrack[properties][gposition2]">' +
                    '<select name="infodatatrack[properties][gposition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                html[++h] += '<td id="infodatatrack[properties][gmaterial2]">' +
                    '<select name="infodatatrack[properties][gmaterial2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete</option>' +
                    '<option>Masonry</option>' +
                    '<option>Gabion/Teramesh</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gnature2]">' +
                    '<select name="infodatatrack[properties][gnature2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Homogeneous - massive rock</option>' +
                    '<option>Homogeneous - cracked rock</option>' +
                    '<option>Homogeneous - soil</option>' +
                    '<option>Heterogeneous – interstratified rock/soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in hard soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in soft soil</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gheight2]">' +
                    '<input name="infodatatrack[properties][gheight2]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="">' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gh_h2]">' +
                    '<select name="infodatatrack[properties][gh_h2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>0 - 10%</option>' +
                    '<option>10 - 25%</option>' +
                    '<option>25 - 50%</option>' +
                    '<option>50 - 75%</option>' +
                    '<option>>75%</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gslope2]">' +
                    '<select name="infodatatrack[properties][gslope2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Vertical (90º)</option>' +
                    '<option>Steep (75-90º)</option>' +
                    '<option>Low (45-75º)</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gdistance2]">' +
                    '<input name="infodatatrack[properties][gdistance2]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="">' +
                    '</td>';

                html[++h] += '<td id="infodatatrack[properties][gtreatments2]">' +
                    '<select name="infodatatrack[properties][gtreatments2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gvegetation2]">' +
                    '<select name="infodatatrack[properties][gvegetation2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gtypevegetation2]">' +
                    '<select name="infodatatrack[properties][gtypevegetation2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Arboreal</option>' +
                    '<option>Bush / Shrub</option>' +
                    '<option>Herbaceus</option>' +
                    '<option>No vegetation</option>' +
                    '<option>Other</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][gvisualcondition2]">' +
                    '<select name="infodatatrack[properties][gvisualcondition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>A</option>' +
                    '<option>B</option>' +
                    '<option>C</option>' +
                    '<option>D</option>' +
                    '<option>E</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                // html[++h] = '<td id="infodatatrack[properties][dcode]"><input name="infodatatrack[properties][dcode]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.dcode[index] !== "undefined" ? data.properties.dcode[index] : '') + '">'+
                //'</td>';
                html[++h] = '<td id="infodatatrack[properties][dtype]">' +
                    '<select name="infodatatrack[properties][dtype]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Longitudinal</option>' +
                    '<option>Culvert</option>' +
                    '<option>Ford</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][dsection]">' +
                    '<select name="infodatatrack[properties][dsection]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete lined rectangular</option>' +
                    '<option>Concrete lined rectangular with cover</option>' +
                    '<option>Concrete lined V drain</option>' +
                    '<option>Kerb / Triangular</option>' +
                    '<option>Earth</option>' +
                    '<option>Other</option>' +
                    '</select>' +
                    '</td>';

                // html[++h] = '<td id="infodatatrack[properties][dcapacity]"><input name="infodatatrack[properties][dcapacity]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' +
                //     (typeof data.properties.dcapacity[index] !== "undefined" ? data.properties.dcapacity[index] : '') + '">'+
                //'</td>';
                html[++h] = '<td id="infodatatrack[properties][dposition]">' +
                    '<select name="infodatatrack[properties][dposition]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '<td id="infodatatrack[properties][dtype2]">' +
                    '<select name="infodatatrack[properties][dtype2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Longitudinal</option>' +
                    '<option>Culvert</option>' +
                    '<option>Ford</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                html[++h] += '<td id="infodatatrack[properties][dsection2]">' +
                    '<select name="infodatatrack[properties][dsection2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete lined rectangular</option>' +
                    '<option>Concrete lined rectangular with cover</option>' +
                    '<option>Concrete lined V drain</option>' +
                    '<option>Kerb / Triangular</option>' +
                    '<option>Earth</option>' +
                    '<option>Other</option>' +
                    '</select>' +
                    '</td>';

                html[++h] += '<td id="infodatatrack[properties][dposition2]">' +
                    '<select name="infodatatrack[properties][dposition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '</select>' +
                    '</td>';
                html[++h] = '</tr>';
            });

            $('#bodytable').html(html.join(''));
            data.geometry.coordinates.forEach(function(element, index) {
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][road_category]"]').val(data.properties.road_category[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][pavement_material]"]').val(data.properties.pavement_material[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][current_visual_condition]"]').val(data.properties.current_visual_condition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtype]"]').val(data.properties.gtype[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gposition]"]').val(data.properties.gposition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gvisualcondition]"]').val(data.properties.gvisualcondition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtype2]"]').val(data.properties.gtype[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gposition2]"]').val(data.properties.gposition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gvisualcondition2]"]').val(data.properties.gvisualcondition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dtype]"]').val(data.properties.dtype[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dposition]"]').val(data.properties.dposition[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dtype2]"]').val(data.properties.dtype2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dposition2]"]').val(data.properties.dposition2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][bexists]"]').val(data.properties.bexists[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gslope]"]').val(data.properties.gslope[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gmaterial]"]').val(data.properties.gmaterial[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gnature]"]').val(data.properties.gnature[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gh_h]"]').val(data.properties.gh_h[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtreatments]"]').val(data.properties.gtreatments[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gvegetation]"]').val(data.properties.gvegetation[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtypevegetation]"]').val(data.properties.gtypevegetation[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dsection]"]').val(data.properties.dsection[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gslope2]"]').val(data.properties.gslope2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gmaterial2]"]').val(data.properties.gmaterial2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gnature2]"]').val(data.properties.gnature2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gh_h2]"]').val(data.properties.gh_h2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtreatments2]"]').val(data.properties.gtreatments2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gvegetation2]"]').val(data.properties.gvegetation2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][gtypevegetation2]"]').val(data.properties.gtypevegetation2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][dsection2]"]').val(data.properties.dsection2[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RBarriersType]"]').val(data.properties.RBarriersType[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RSafetyFence]"]').val(data.properties.RSafetyFence[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RBarrierFunct]"]').val(data.properties.RBarrierFunct[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RSignalsType]"]').val(data.properties.RSignalsType[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RVSignalsType]"]').val(data.properties.RVSignalsType[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RSignalsFunct]"]').val(data.properties.RSignalsFunct[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RLightType]"]').val(data.properties.RLightType[index]);
                $('#row' + index).children('td').children('select').filter('[name="infodatatrack[properties][RLightFunct]"]').val(data.properties.RLightFunct[index]);
            });

        };


        console.log("ready DOM!");
        rObject = <%- JSON.stringify(infodatatrack) %>
        fillTable(rObject)

        $('.table-responsive').hide();
        var options = {
            page_size: 50
        }
        $('#dataTable').pagination(rObject, options);



        $checks = $('#form').find("input[name='check[_id]']");

        var $inputsDC = $('#form').find("input[name='infodatatrack[properties][date_construction]']");
        $("input[name='infodatatrack[properties][date_construction]']").datepicker({
            dateFormat: 'dd-mm-yy',
            onSelect: function(date) {
                $inputsDC.trigger("blur");
            }

        });

        $('#road, #furniture, #bridges, #geotechnicals, #drainage').click(function() {
            // alert("Hidden." + $(this).attr("id"));
            var $clase = $(this).attr("id");
            $('.' + $clase).each(function() {
                $(this).hide();
                $("tbody > tr > td[id='" + $(this).attr("id") + "']", $('#dataTable')).hide();
                if ($(this).attr("title") === 'Selection') {
                    if ($('[id^=check]').prop('checked') == undefined || $('[id^=check]').prop('checked') == false) {
                        $('[id^=check]').prop('checked', true);
                    } else {
                        $('[id^=check]').prop('checked', false);

                    }
                    $checks.trigger("change");

                }
            });

        });

        $("thead > tr > th", $('#dataTable')).click(function() {
            // Clic en cabecera individual
            // alert("Handler for .click() called.");
            // //console.log($(this).attr("id"));
            if ($(this).attr("id")) {
                $(this).hide();
                $("tbody > tr > td[id='" + $(this).attr("id") + "']", $('#dataTable')).hide();
            }
            if ($(this).attr("title") === 'Selection') {
                if ($('[id^=check]').prop('checked') == undefined || $('[id^=check]').prop('checked') == false) {
                    $('[id^=check]').prop('checked', true);
                } else {
                    $('[id^=check]').prop('checked', false);

                }
                $checks.trigger("change");

            }

        });

        $("#showall").click(function() {
            $("thead > tr > th", $('#dataTable')).each(function(index, elem) {
                if ($(this).attr("id")) {
                    $(this).show();
                    $("tbody > tr > td[id='" + $(this).attr("id") + "']", $('#dataTable')).show();
                } else {
                    $(this).show();

                }
            });
        });

        // INPUTS BLUR

        $(":text,input[name^=infodatatrack]").blur(function() {
            // console.log($(this));
            var $this = $(this);
            // console.log($this[0].name);
            var $val = $this[0].value;
            $checks.each(function(index) {
                $check = $(this);
                if ($check.prop("checked")) {
                    // ////console.log('Check: ' + (index));
                    $("form").find("input[name=" + $.escapeSelector($this[0].name) + "]")[index].value = $val;

                }


            });
        });



        // SELECTS CHANGES
        var $inputsRLightFunct = $('#form').find('select[ name="infodatatrack[properties][RLightFunct]"]');
        $inputsRLightFunct.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRLightFunct[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRLightType = $('#form').find('select[ name="infodatatrack[properties][RLightType]"]');
        $inputsRLightType.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRLightType[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRSignalsFunct = $('#form').find('select[ name="infodatatrack[properties][RSignalsFunct]"]');
        $inputsRSignalsFunct.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRSignalsFunct[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRVSignalsType = $('#form').find('select[ name="infodatatrack[properties][RVSignalsType]"]');
        $inputsRVSignalsType.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRVSignalsType[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRSignalsType = $('#form').find('select[ name="infodatatrack[properties][RSignalsType]"]');
        $inputsRSignalsType.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRSignalsType[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRBarrierFunct = $('#form').find('select[ name="infodatatrack[properties][RBarrierFunct]"]');
        $inputsRBarrierFunct.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRBarrierFunct[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRSafetyFence = $('#form').find('select[ name="infodatatrack[properties][RSafetyFence]"]');
        $inputsRSafetyFence.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRSafetyFence[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRBarriersType = $('#form').find('select[ name="infodatatrack[properties][RBarriersType]"]');
        $inputsRBarriersType.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRBarriersType[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsRC = $('#form').find('select[ name="infodatatrack[properties][road_category]"]');
        $inputsRC.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsRC[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsPM = $('#form').find('select[ name="infodatatrack[properties][pavement_material]"]');
        $inputsPM.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsPM[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsCVC = $('#form').find('select[ name="infodatatrack[properties][current_visual_condition]"]');
        $inputsCVC.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsCVC[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGT = $('#form').find('select[ name="infodatatrack[properties][gtype]"]');
        $inputsGT.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGT[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGPOS = $('#form').find('select[ name="infodatatrack[properties][gposition]"]');
        $inputsGPOS.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGPOS[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGVPOS = $('#form').find('select[ name="infodatatrack[properties][gvisualcondition]"]');
        $inputsGVPOS.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGVPOS[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsDT = $('#form').find('select[ name="infodatatrack[properties][dtype]"]');
        $inputsDT.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsDT[index].value = $this.val();
                    }


                });
            }
        });

        var $inputsDP = $('#form').find('select[ name="infodatatrack[properties][dposition]"]');
        $inputsDP.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsDP[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsBE = $('#form').find('select[ name="infodatatrack[properties][bexists]"]');
        $inputsBE.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsBE[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGS = $('#form').find('select[ name="infodatatrack[properties][gslope]"]');
        $inputsGS.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGS[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgmaterial = $('#form').find('select[ name="infodatatrack[properties][gmaterial]"]');
        $inputsgmaterial.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgmaterial[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgnature = $('#form').find('select[ name="infodatatrack[properties][gnature]"]');
        $inputsgnature.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgnature[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgh_h = $('#form').find('select[ name="infodatatrack[properties][gh_h]"]');
        $inputsgh_h.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgh_h[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgtreatments = $('#form').find('select[ name="infodatatrack[properties][gtreatments]"]');
        $inputsgtreatments.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgtreatments[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgvegetation = $('#form').find('select[ name="infodatatrack[properties][gvegetation]"]');
        $inputsgvegetation.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgvegetation[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgtypevegetation = $('#form').find('select[ name="infodatatrack[properties][gtypevegetation]"]');
        $inputsgtypevegetation.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgtypevegetation[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsdsection = $('#form').find('select[ name="infodatatrack[properties][dsection]"]');
        $inputsdsection.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsdsection[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGS2 = $('#form').find('select[ name="infodatatrack[properties][gslope2]"]');
        $inputsGS2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGS2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgmaterial2 = $('#form').find('select[ name="infodatatrack[properties][gmaterial2]"]');
        $inputsgmaterial2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgmaterial2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgnature2 = $('#form').find('select[ name="infodatatrack[properties][gnature2]"]');
        $inputsgnature2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgnature2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgh_h2 = $('#form').find('select[ name="infodatatrack[properties][gh_h2]"]');
        $inputsgh_h2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgh_h2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgtreatments2 = $('#form').find('select[ name="infodatatrack[properties][gtreatments2]"]');
        $inputsgtreatments2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgtreatments2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgvegetation2 = $('#form').find('select[ name="infodatatrack[properties][gvegetation2]"]');
        $inputsgvegetation2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgvegetation2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsgtypevegetation2 = $('#form').find('select[ name="infodatatrack[properties][gtypevegetation2]"]');
        $inputsgtypevegetation2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsgtypevegetation2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGT2 = $('#form').find('select[ name="infodatatrack[properties][gtype2]"]');
        $inputsGT2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGT2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGPOS2 = $('#form').find('select[ name="infodatatrack[properties][gposition2]"]');
        $inputsGPOS2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGPOS2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsGVPOS2 = $('#form').find('select[ name="infodatatrack[properties][gvisualcondition2]"]');
        $inputsGVPOS2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsGVPOS2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsdsection2 = $('#form').find('select[ name="infodatatrack[properties][dsection2]"]');
        $inputsdsection2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsdsection2[index].value = $this.val();
                    }


                });
            }
        });
        var $inputsDT2 = $('#form').find('select[ name="infodatatrack[properties][dtype2]"]');
        $inputsDT2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsDT2[index].value = $this.val();
                    }


                });
            }
        });

        var $inputsDP2 = $('#form').find('select[ name="infodatatrack[properties][dposition2]"]');
        $inputsDP2.on('change', function() {
            var $this = $(this);
            if ($this.val() != '') {
                ////console.log('ID: ' + $this.attr("id"));
                $checks.each(function(index) {
                    $check = $(this);
                    if ($check.prop("checked")) {
                        ////console.log('Check: ' + (index));
                        $inputsDP2[index].value = $this.val();
                    }


                });
            }
        });

        $("#addcoord").click(function() {
            $('#addcoord').prop('disabled', true);
            var dataPost = {};
            dataPost._id = "<%- infodatatrack._id %>";

            var p1 = $.ajax({
                url: '/auth/WEB/infodatatrack/duplicate_rows',
                data: JSON.stringify(dataPost),
                type: 'POST',
                contentType: 'application/json'
            }, function(data) {
                // //console.log('dataRoad ' + JSON.stringify(data));
                return (data);
            });
            Promise.all([p1]).then(function(values) {
                dataTrack = values[0];
                // console.log(dataTrack);
                // location.reload();
                window.location.reload(true);
            });


        });

        $("#checkcoord").click(function() {

            $('[id="infodatatrack[geometry][coordinates]"]').each(function(index, elem) {
                // console.log(elem);
                if (index > 0) {
                    $val = $(this)[0].textContent;
                    // console.log($val);
                    $(this).html('<input name="infodatatrack[geometry][coordinates]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="' + $val + '">');
                }
            });
            $('#form').find("input[name='infodatatrack[geometry][coordinates]']").css('min-width', '200px');
            var $inputsCOOR = $('#form').find("input[name='infodatatrack[geometry][coordinates]']");
            $inputsCOOR.blur(function() {
                var $this = $(this);
                if ($this.val() != '') {
                    ////console.log('ID: ' + $this.attr("id"));
                    $checks.each(function(index) {
                        $check = $(this);
                        if ($check.prop("checked")) {
                            ////console.log('Check: ' + (index));
                            $inputsCOOR[index].value = $this.val();
                        }


                    });
                }
            });
        });


        // Añado valores de formato
        //$('#form').find("input").css('min-width', '50px');
        // $('#form').find("input[type='text']").css('min-width', '50px');
        $('#form').find("input[name='infodatatrack[properties][date_construction]']").css('min-width', '80px');
        $('#form').find("select").css('min-width', '100px');
        $('.table-responsive').show();


        // Check clic - ROW colored
        var lastChecked = null;
        $checks.bind("click", function(e) {
            if (!lastChecked) {
                lastChecked = this;
                return;
            }

            if (e.shiftKey) {
                var start = $checks.index(this);
                var end = $checks.index(lastChecked);

                $checks.slice(Math.min(start, end), Math.max(start, end) + 1).prop('checked', lastChecked.checked);
                $checks.trigger("change");
            }

            lastChecked = this;
        });
        $checks.on("change", function() {
            if ($(this).is(':checked'))
                $(this).closest('tr').children('td').css('background-color', '#ccf5ff');
            else
                $(this).closest('tr').children('td').css('background-color', '');
        });

        var $elemkobos = $('#form').find('i[ name="modalKoboElem"]');
        var koboid;
        var obj
        $elemkobos.on('click', function() {
            var res = JSON.stringify($(this).data('params'));
            obj = JSON.parse(res);
            // console.log(obj);
            // alert('The modal is about to be shown.' + obj.id);
            koboid = obj._id;
            $("#modalKobo").modal("show");
        });
        $("#modalKobo").on('show.bs.modal', function() {
            var dataPost = {};
            dataPost = obj;
            dataPost._id = koboid;
            var camposShow = ["_id", "kobo_type", "_xform_id_string", "gposition", "gheight", "glength", "gdistance", "gslope", "blenght", "bwidth", "dlength", "coordinates"];
            var camposShowdisabled = ["_id", "kobo_type", "_xform_id_string"];
            var p1 = $.ajax({
                url: '/auth/WEB/koboinfo/list_koboinfos/' + koboid,
                data: JSON.stringify(dataPost),
                type: 'POST',
                contentType: 'application/json'
            }, function(data) {
                // console.log('koboinfo ' + JSON.stringify(data));
                return (data);
            });
            Promise.all([p1]).then(function(values) {
                $("#formkobo").empty();
                koboinfo = values[0];
                var ifdtid = $("input[name*='infodatatrack[_id]']").val();
                var ini = 0;
                var fin = rObject.geometry.coordinates.length;
                $("#formkobo").append('<input name="kobo[ifdtid]" required class="form-control" value="' + ifdtid + '" type="hidden">');
                // alert(ifdtid);
                //console.log(koboinfo);
                $.each(koboinfo, function(key, value) {
                    if (key === 'properties') {
                        $.each(value, function(kprop, vprop) {
                            //console.log(kprop, vprop);
                            if (kprop === "_attachments") {
                                $("#photo").empty();
                                $.each(vprop, function(kfoto, vfoto) {
                                    var fotosmall = vfoto.replace(".jpg", "-small.jpg");
                                    $("#photo").append('<img src="' + fotosmall + '">');
                                    $("#formkobo").append('<input name="kobo[properties][' + kprop + ']" required class="form-control" value="' + vfoto + '" type="hidden">');
                                });
                            } else if (kprop === "dphoto" || kprop === "bphoto" || kprop === "gphoto") {
                                $.each(vprop, function(kfoto, vfoto) {
                                    $("#formkobo").append('<input name="kobo[properties][' + kprop + ']" required class="form-control" value="' + vfoto + '" type="hidden">');
                                });
                            } else {
                                if (camposShow.indexOf(kprop) >= 0) {
                                    $("#formkobo").append('<label class="col-sm-2 col-sm-2 control-label">' + kprop + '</label>');
                                    if (camposShowdisabled.indexOf(kprop) >= 0) {
                                        $("#formkobo").append('<div class="col-sm-4">' +
                                            '<input name="kobo[properties][' + kprop + ']" required class="form-control" value="' + vprop + '" readonly>' +
                                            '</div>');
                                    } else {
                                        $("#formkobo").append('<div class="col-sm-4">' +
                                            '<input name="kobo[properties][' + kprop + ']" required class="form-control" value="' + vprop + '">' +
                                            '</div>');
                                    }
                                } else {
                                    $("#formkobo").append('<input name="kobo[properties][' + kprop + ']" required class="form-control" value="' + vprop + '" type="hidden">');
                                }
                            }

                        });
                    } else if (key === 'geometry') {
                        $.each(value, function(kgeom, vgeom) {
                            // console.log(kgeom, vgeom);
                            if (kgeom === 'coordinates') {
                                $("#formkobo").append('<div class="form-group">');
                                $("#formkobo").append('<label class="col-sm-2 col-sm-2 control-label">' + kgeom + '</label>');
                                $("#formkobo").append('<div class="col-sm-10">' +
                                    '<input name="kobo[geometry][' + kgeom + ']" required class="form-control" value="' + vgeom + '" readonly>' +
                                    '</div>');
                                $("#formkobo").append('</div>');
                            } else {
                                $("#formkobo").append('<input name="kobo[geometry][' + kgeom + ']" required class="form-control" value="' + vgeom + '" type="hidden">');
                            }
                            // (kgeom === 'coordinates') ? $("input[name*='kobo[geometry][" + kgeom + "]']").val(vgeom): false;

                        });
                    } else {
                        if (camposShow.indexOf(key) >= 0) {
                            $("#formkobo").append('<label class="col-sm-2 col-sm-2 control-label">' + key + '</label>');
                            $("#formkobo").append('<div class="col-sm-4">' +
                                '<input name="kobo[' + key + ']" required class="form-control" value="' + value + '" readonly>' +
                                '</div>');
                        } else {
                            $("#formkobo").append('<input name="kobo[' + key + ']" required class="form-control" value="' + value + '" type="hidden">');
                        }

                    }


                    // console.log(key, value);
                    //$("input[name*='kobo[" + key + "]']").val(value);
                });
                var optionsstr = '';
                for (var i = ini; i < fin; i++) {
                    optionsstr += '<option>' + i + '</option>';
                }
                $("#formkobo").append('<label class="col-sm-2 col-sm-2 control-label">coord ini</label>');
                $("#formkobo").append('<div class="col-sm-4">' +
                    '<select class="form-control" name="kobo[ifdtini]" required class="form-control">' +
                    optionsstr +
                    '</select></div>');

                var $inputsCOORini = $('#formkobo').find('select[ name="kobo[ifdtini]"]');
                $inputsCOORini.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        ////console.log('Check: ' + (index));
                        $('#formkobo').find("input[name='kobo[geometry][coordinates]']").val(rObject.geometry.coordinates[parseInt($this.val())]);
                    }
                });
                $("#formkobo").append('<label class="col-sm-2 col-sm-2 control-label">coord fin</label>');
                $("#formkobo").append('<div class="col-sm-4">' +
                    '<select class="form-control" name="kobo[ifdtfin]" required class="form-control">' +
                    optionsstr +
                    '</select></div>');
                // location.reload();
                // window.location.reload(true);
            });

        });

        var $deleteKoboElem = $('#form').find('i[name="deleteKoboElem"]');
        $deleteKoboElem.click(function() {
            var $this = $(this);
            var res = JSON.stringify($(this).data('params'));
            obj = JSON.parse(res);
            console.log(obj);
            console.log(rObject._id);
            var dataPost = {};
            dataPost = obj;
            dataPost._id = rObject._id;
            console.log(dataPost);
            console.log('/auth/WEB/infodatatrack/delrows/' + rObject._id + '/' + obj.index);

            var p1 = $.ajax({
                url: '/auth/WEB/infodatatrack/delrows/' + rObject._id + '/' + obj.index,
                data: JSON.stringify(dataPost),
                type: 'POST',
                contentType: 'application/json'
            }, function(data) {
                // console.log('koboinfo ' + JSON.stringify(data));
                return (data);
            });
            // Promise.all([p1]).then(function(values) {
            //     $("#formkobo").empty();
            //     koboinfo = values[0];
            // });

        });




    });

    function duplicateCols(option) {
        switch (option) {
            case 'geo':
                // alert('geotechnicals');
                var geo_html = '<td id="infodatatrack[properties][gtype2]">' +
                    '<select name="infodatatrack[properties][gtype2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Embankment</option>' +
                    '<option>Cutting</option>' +
                    '<option>Retaining wall</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                geo_html += '<td id="infodatatrack[properties][gposition2]">' +
                    '<select name="infodatatrack[properties][gposition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';

                geo_html += '<td id="infodatatrack[properties][gmaterial2]">' +
                    '<select name="infodatatrack[properties][gmaterial2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete</option>' +
                    '<option>Masonry</option>' +
                    '<option>Gabion/Teramesh</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gnature2]">' +
                    '<select name="infodatatrack[properties][gnature2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Homogeneous - massive rock</option>' +
                    '<option>Homogeneous - cracked rock</option>' +
                    '<option>Homogeneous - soil</option>' +
                    '<option>Heterogeneous – interstratified rock/soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in hard soil</option>' +
                    '<option>Heterogeneous - rock blocks embedded in soft soil</option>' +
                    '<option>Other</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gheight2]">' +
                    '<input name="infodatatrack[properties][gheight2]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="">' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gh_h2]">' +
                    '<select name="infodatatrack[properties][gh_h2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>0 - 10%</option>' +
                    '<option>10 - 25%</option>' +
                    '<option>25 - 50%</option>' +
                    '<option>50 - 75%</option>' +
                    '<option>>75%</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gslope2]">' +
                    '<select name="infodatatrack[properties][gslope2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Vertical (90º)</option>' +
                    '<option>Steep (75-90º)</option>' +
                    '<option>Low (45-75º)</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gdistance2]">' +
                    '<input name="infodatatrack[properties][gdistance2]" type="text" style="min-width: 50px;" class="form-control round-form input-sm" value="">' +
                    '</td>';

                geo_html += '<td id="infodatatrack[properties][gtreatments2]">' +
                    '<select name="infodatatrack[properties][gtreatments2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gvegetation2]">' +
                    '<select name="infodatatrack[properties][gvegetation2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Yes</option>' +
                    '<option>No</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gtypevegetation2]">' +
                    '<select name="infodatatrack[properties][gtypevegetation2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Arboreal</option>' +
                    '<option>Bush / Shrub</option>' +
                    '<option>Herbaceus</option>' +
                    '<option>No vegetation</option>' +
                    '<option>Other</option>' +
                    '<option>NA</option>' +
                    '<option>Unknown</option>' +
                    '</select>' +
                    '</td>';
                geo_html += '<td id="infodatatrack[properties][gvisualcondition2]">' +
                    '<select name="infodatatrack[properties][gvisualcondition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>A</option>' +
                    '<option>B</option>' +
                    '<option>C</option>' +
                    '<option>D</option>' +
                    '<option>E</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                $('#bodytable').find('tr').each(function() {
                    $(this).find("td[id='" + $.escapeSelector('infodatatrack[properties][gvisualcondition]') + "']")
                        .eq(0).after(geo_html);
                });
                geo_header = '<th id="infodatatrack[properties][gtype2]" title="Type of earthwork" class="geotechnicals">TYPE2</th>';
                geo_header += '<th id="infodatatrack[properties][gposition2]" title="Position" class="geotechnicals">POS2</th>';
                geo_header += '<th id="infodatatrack[properties][gmaterial2]" title="Material - Retaining walls" class="geotechnicals">MAT2</th>';
                geo_header += '<th id="infodatatrack[properties][gnature2]" title="Nature - Earthworks" class="geotechnicals">NATURE2</th>';
                geo_header += '<th id="infodatatrack[properties][gheight2]" title="Height (m)" class="geotechnicals">HEIGHT2</th>';
                geo_header += '<th id="infodatatrack[properties][gh_h2]" title="Relation h/H (m)" class="geotechnicals">H_H2</th>';
                geo_header += '<th id="infodatatrack[properties][gslope2]" title="Slope (º)" class="geotechnicals">SLOPE2</th>';
                geo_header += '<th id="infodatatrack[properties][gdistance2]" title="Distance to road (m)" class="geotechnicals">DIST2</th>';
                geo_header += '<th id="infodatatrack[properties][gtreatments2]" title="Existence of Geotech Treatments" class="geotechnicals">GEO TREAT2</th>';
                geo_header += '<th id="infodatatrack[properties][gvegetation2]" title="Existence of Vegetation" class="geotechnicals">VEGETATION2</th>';
                geo_header += '<th id="infodatatrack[properties][gtypevegetation2]" title="Type of Vegetation" class="geotechnicals">TYPE VEG2</th>';
                geo_header += '<th id="infodatatrack[properties][gvisualcondition2]" title="Current visual condition" class="geotechnicals">VISUAL COND2</th>';
                $('#dataTable').find('thead > tr').each(function(key, value) {
                    if (key === 0) {
                        $(this).find("th").eq(4).after('<th colspan="12" scope="colgroup" class="geotechnicals">' +
                            'NEW GEOTECHNICALS</th>');
                    } else {
                        $(this).find("th[id='" + $.escapeSelector('infodatatrack[properties][gvisualcondition]') + "']")
                            .eq(0).after(geo_header);

                    }
                });
                $('#geo_link').hide();
                var $inputsGS2 = $('#form').find('select[ name="infodatatrack[properties][gslope2]"]');
                $inputsGS2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsGS2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgmaterial2 = $('#form').find('select[ name="infodatatrack[properties][gmaterial2]"]');
                $inputsgmaterial2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgmaterial2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgnature2 = $('#form').find('select[ name="infodatatrack[properties][gnature2]"]');
                $inputsgnature2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgnature2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgh_h2 = $('#form').find('select[ name="infodatatrack[properties][gh_h2]"]');
                $inputsgh_h2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgh_h2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgtreatments2 = $('#form').find('select[ name="infodatatrack[properties][gtreatments2]"]');
                $inputsgtreatments2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgtreatments2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgvegetation2 = $('#form').find('select[ name="infodatatrack[properties][gvegetation2]"]');
                $inputsgvegetation2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgvegetation2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsgtypevegetation2 = $('#form').find('select[ name="infodatatrack[properties][gtypevegetation2]"]');
                $inputsgtypevegetation2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsgtypevegetation2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsGT2 = $('#form').find('select[ name="infodatatrack[properties][gtype2]"]');
                $inputsGT2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsGT2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsGPOS2 = $('#form').find('select[ name="infodatatrack[properties][gposition2]"]');
                $inputsGPOS2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsGPOS2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsGVPOS2 = $('#form').find('select[ name="infodatatrack[properties][gvisualcondition2]"]');
                $inputsGVPOS2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsGVPOS2[index].value = $this.val();
                            }


                        });
                    }
                });
                break;
            case 'drainage':
                // alert('drainage ');
                var dra_html = '<td id="infodatatrack[properties][dtype2]">' +
                    '<select name="infodatatrack[properties][dtype2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Longitudinal</option>' +
                    '<option>Culvert</option>' +
                    '<option>Ford</option>' +
                    '<option>Unknown</option>' +
                    '<option>N/A</option>' +
                    '<option>1</option>' +
                    '</select>' +
                    '</td>';
                dra_html += '<td id="infodatatrack[properties][dsection2]">' +
                    '<select name="infodatatrack[properties][dsection2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Concrete lined rectangular</option>' +
                    '<option>Concrete lined rectangular with cover</option>' +
                    '<option>Concrete lined V drain</option>' +
                    '<option>Kerb / Triangular</option>' +
                    '<option>Earth</option>' +
                    '<option>Other</option>' +
                    '</select>' +
                    '</td>';

                dra_html += '<td id="infodatatrack[properties][dposition2]">' +
                    '<select name="infodatatrack[properties][dposition2]" class="form-control">' +
                    '<option ></option>' +
                    '<option>Right</option>' +
                    '<option>Left</option>' +
                    '<option>Both</option>' +
                    '</select>' +
                    '</td>';
                $('#bodytable').find('tr').each(function() {
                    $(this).find("td[id='" + $.escapeSelector('infodatatrack[properties][dposition]') + "']")
                        .eq(0).after(dra_html);
                });
                var dra_head = '<th id="infodatatrack[properties][dtype2]" title="Type of drainage" class="drainage">TYPE</th>';
                dra_head += '<th id="infodatatrack[properties][dsection2]" title="Longitudinal drainage - Type of section" class="drainage">SECTION</th>';
                dra_head += '<th id="infodatatrack[properties][dposition2]" title="Drainage position" class="drainage">DPOS</th>';
                $('#dataTable').find('thead > tr').each(function(key, value) {
                    if (key === 0) {
                        $(this).find("th").eq(5).after('<th colspan="3" scope="colgroup" class="drainage">' +
                            'NEW DRAINAGES</th>');
                    } else {
                        $(this).find("th[id='" + $.escapeSelector('infodatatrack[properties][dposition]') + "']")
                            .eq(0).after(dra_head);

                    }
                });
                $('#dra_link').hide();

                var $inputsdsection2 = $('#form').find('select[ name="infodatatrack[properties][dsection2]"]');
                $inputsdsection2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsdsection2[index].value = $this.val();
                            }


                        });
                    }
                });
                var $inputsDT2 = $('#form').find('select[ name="infodatatrack[properties][dtype2]"]');
                $inputsDT2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsDT2[index].value = $this.val();
                            }


                        });
                    }
                });

                var $inputsDP2 = $('#form').find('select[ name="infodatatrack[properties][dposition2]"]');
                $inputsDP2.on('change', function() {
                    var $this = $(this);
                    if ($this.val() != '') {
                        ////console.log('ID: ' + $this.attr("id"));
                        $checks.each(function(index) {
                            $check = $(this);
                            if ($check.prop("checked")) {
                                ////console.log('Check: ' + (index));
                                $inputsDP2[index].value = $this.val();
                            }


                        });
                    }
                });

                break;

            default:
                break;
        }
        $('#form').find("select").css('min-width', '100px');
        // INPUTS BLUR

        $(":text,input[name^=infodatatrack]").blur(function() {
            // console.log($(this));
            var $this = $(this);
            // console.log($this[0].name);
            var $val = $this[0].value;
            $checks.each(function(index) {
                $check = $(this);
                if ($check.prop("checked")) {
                    // ////console.log('Check: ' + (index));
                    $("form").find("input[name=" + $.escapeSelector($this[0].name) + "]")[index].value = $val;

                }


            });
        });

    };
</script>